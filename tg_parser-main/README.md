# tg_parser
Парсер участников, постов и комментарив из ТГ-Чатов и чатов для комментариев в ТГ-Каналах
## Возможности
- Выгрузка участников групп/каналов(по чату для комментариев) в json, excel и txt
- Выгрузка истории групп/каналов(по чату для комментариев) в html и txt.

------------

## Установка
### Для Linux:

- Выполнить **pip install -r "requirements.txt"** из каталога **tg_parser**.
- На сайте https://my.telegram.org/auth получить **api_id** и **api_hash**
- Записать данные в файл **src/config.py**
------------

## Использование
1. Запустить **main.py** из каталога **src**.
	1.1  При первом запуске скрипт запросит у вас номер телефона. Это необходимо, чтобы скрипт авторизировался под вашим аккаунтом и мог собирать данные о чатах/каналах.
2. Введите ссылку на чат/канал либо id чата/канала, в которых состоит пользователь, под чьим именем используется скрипт. Например:
 - **@devfm**
 -  **https://t.me/devfm**

 - ID канала можно взять из ссылки в telegram wed. Например:
 - https://web.telegram.org/k/#-1745744211 где  **-1745744211** - искомый id

	Обратите внимание, что некоторые TG-клиенты показывают ID чатов/каналов, убирая значение **-100** от начала ID. Например:
	-  **-100123456789** - Правильно
	-  **100123456789** - Неправильно
	-  **123456789** - Неправильно
    - 
3. После получения списка участников в главном каталоге появятся директории **чаты** и **каналы** в которых, в зависимости от вашего выбора, появятся папки с вашими чатами/каналами с обработанными данными.
4. Скрипт предложит вам сохранить историю сообщений. При положительном ответе сообщения начнут записываться в те же папки.


## Docker
```bash
sudo docker build -t tg_parser .
sudo docker run -it --rm tg_parser --link=<link> --save_data=<1/2>
```

## Quickstart
```bash
sudo docker build -t tg .
sudo docker run -it --rm -v "${PWD}"/src:/code/src/ --mount type=bind,source="$(pwd)"/data,target=/code/data tg --link=-1001385084419 --save_data=1 --time=2023-05-07
```
## Источники
https://github.com/Grigorich-JSDio/TG-Parser?ysclid=ldk3wu958v309229229
